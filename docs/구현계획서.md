# LawPass 사건 파일 관리 시스템 구현 계획서

## 1. 개요

본 문서는 기존 LawPass 사건 파일 관리 시스템의 코드를 체계적으로 구조화하고, GUI 인터페이스를 추가하여 완전한 소프트웨어로 개발하기 위한 계획을 담고 있습니다.

## 2. 현재 시스템 분석

### 2.1 현재 구성
- 단계별 처리 스크립트 (step1~step5)
- 독립적인 유틸리티 스크립트 (audio_to_markdown.py, add_folder_prefix.py 등)
- 설정 파일 (config.yaml)
- 공통 기능이 각 스크립트에 중복 구현됨

### 2.2 주요 기능
- 사건 폴더 구조 생성 및 관리
- 전자소송 파일 수집 및 정리
- 파일명 표준화 및 접두어 추가
- PDF 텍스트 추출 및 마크다운 변환
- 오디오 파일 텍스트 추출
- 사건 폴더 패키징

## 3. 구조화 계획

### 3.1 폴더 구조
```
lawpass_casefiles_management_system/
│
├── core/                      # 핵심 기능 모듈
│   ├── __init__.py
│   ├── file_manager.py        # 파일 관리 기능
│   ├── folder_manager.py      # 폴더 관리 기능
│   ├── text_extractor.py      # 텍스트 추출 기능
│   └── utils.py               # 공통 유틸리티
│
├── steps/                     # 단계별 처리 스크립트
│   ├── __init__.py
│   ├── step1_copy_case_path.py
│   ├── step2_create_standard_folders.py
│   ├── step3_casefiles_importer.py
│   ├── step4_casefiles_renamer.py
│   └── step5_casefiles_extractor.py
│
├── tools/                     # 독립적인 유틸리티 도구
│   ├── __init__.py
│   ├── audio_to_markdown.py
│   ├── add_folder_prefix.py
│   ├── md_to_txt_converter.py
│   └── pack_legal_case_interactive.py
│
├── gui/                       # GUI 관련 코드
│   ├── __init__.py
│   ├── main_window.py         # 메인 윈도우
│   ├── pipeline_tab.py        # 파이프라인 탭
│   ├── tools_tab.py           # 도구 탭
│   ├── settings_tab.py        # 설정 탭
│   └── resources/             # 아이콘, 이미지 등 리소스
│
├── config/                    # 설정 파일
│   ├── __init__.py
│   ├── config.yaml            # 기본 설정
│   ├── templates/             # 마크다운 템플릿
│   └── .env                   # 환경 변수
│
├── logs/                      # 로그 파일
│
├── tests/                     # 테스트 코드
│   ├── __init__.py
│   └── test_*.py
│
├── docs/                      # 문서화
│   ├── README.md
│   └── USAGE.md
│
├── run.py                     # CLI 실행 파일
├── run_gui.py                 # GUI 실행 파일
└── requirements.txt           # 의존성 패키지
```

### 3.2 모듈화 계획

#### 3.2.1 core 모듈
- **file_manager.py**: 파일 복사, 이동, 백업, 이름 변경 등 기능
- **folder_manager.py**: 폴더 생성, 구조화 기능
- **text_extractor.py**: PDF, 오디오 텍스트 추출 기능
- **utils.py**: 로깅, 경로 처리, 사용자 입력 등 공통 기능

#### 3.2.2 steps 모듈
- 각 단계별 스크립트를 core 모듈 기능을 사용하도록 리팩토링
- 독립 실행 및 파이프라인 실행 모두 지원

#### 3.2.3 tools 모듈
- 독립적인 유틸리티 도구들을 core 모듈 기능 사용하도록 리팩토링
- GUI 및 CLI에서 모두 호출 가능하도록 구성

## 4. GUI 개발 계획

### 4.1 기술 스택
- **프레임워크**: PyQt5 또는 tkinter
- **디자인 패턴**: MVC(Model-View-Controller) 패턴 적용
- **스타일**: 모던하고 직관적인 인터페이스

### 4.2 주요 화면 구성

#### 4.2.1 메인 윈도우
- 탭 기반 인터페이스
- 상태 표시줄 (진행 상태, 로그 메시지 등)
- 메뉴 바 (파일, 도구, 설정, 도움말)

#### 4.2.2 파이프라인 탭
- 사건 폴더 선택 기능
- 단계별 실행 옵션 (체크박스)
- 진행 상황 표시 (프로그레스 바)
- 결과 요약 표시

#### 4.2.3 도구 탭
- 각 독립 도구별 서브탭 구성
- 도구별 필요 매개변수 입력 UI
- 실행 및 결과 표시 영역

#### 4.2.4 설정 탭
- 설정 파일 편집 기능
- 경로 설정 (전자소송 다운로드 폴더, 백업 폴더 등)
- 파일명 변경 규칙 설정
- 텍스트 추출 설정

### 4.3 기능 구현 계획

#### 4.3.1 비동기 처리
- 긴 작업은 별도 스레드에서 실행
- 진행 상황 실시간 업데이트
- 작업 취소 기능

#### 4.3.2 로깅 및 오류 처리
- GUI 내 로그 뷰어 제공
- 오류 발생 시 사용자 친화적 메시지 표시
- 상세 로그 파일 저장

#### 4.3.3 설정 관리
- 설정 저장 및 불러오기
- 프로필 기능 (여러 설정 프로필 관리)
- 설정 백업 및 복원

## 5. 구현 단계 및 일정

### 5.1 1단계: 코드 구조화 (2주)
- 폴더 구조 생성
- 공통 기능 추출 및 core 모듈 구현
- 기존 스크립트 리팩토링

### 5.2 2단계: CLI 개선 (1주)
- 통합 명령줄 인터페이스 구현
- 설정 파일 기반 자동화 기능 추가
- 기본 테스트 작성

### 5.3 3단계: GUI 기본 구조 (2주)
- 메인 윈도우 및 탭 구조 구현
- 기본 UI 컴포넌트 구현
- 코어 모듈과 GUI 연동

### 5.4 4단계: GUI 기능 구현 (3주)
- 파이프라인 실행 기능 구현
- 도구별 인터페이스 구현
- 설정 관리 기능 구현

### 5.5 5단계: 테스트 및 문서화 (2주)
- 단위 테스트 및 통합 테스트
- 사용자 매뉴얼 작성
- 개발자 문서 작성

### 5.6 6단계: 패키징 및 배포 (1주)
- 실행 파일 생성 (PyInstaller 등 사용)
- 설치 프로그램 제작
- 최종 테스트 및 배포

## 6. 의존성 및 요구사항

### 6.1 필수 패키지
- PyQt5 또는 tkinter (GUI)
- pyyaml (설정 파일)
- rich (콘솔 출력)
- pdf2image (PDF 처리)
- google-cloud-vision (OCR)
- openai-whisper (오디오 처리)

### 6.2 외부 의존성
- Poppler (PDF 처리)
- FFmpeg (오디오 처리)
- Google Cloud 계정 (Vision API)

## 7. 향후 확장 계획

### 7.1 기능 확장
- 문서 내용 검색 기능
- 사건 관리 데이터베이스 연동
- 자동 백업 및 동기화
- 다중 사용자 지원

### 7.2 통합 확장
- 법률 AI 도구 연동
- 클라우드 저장소 연동
- 모바일 앱 연동

## 8. 결론

본 계획서는 기존 LawPass 사건 파일 관리 시스템을 체계적으로 구조화하고 GUI 인터페이스를 추가하여 완전한 소프트웨어로 발전시키기 위한 로드맵을 제시합니다. 코드 모듈화와 GUI 개발을 통해 사용자 경험을 개선하고, 법률 전문가의 업무 효율성을 높이는 것이 궁극적인 목표입니다.

---

작성일: 2025년 4월 30일
